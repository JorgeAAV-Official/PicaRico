<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Carrito - PicaRico</title>
  <link rel="stylesheet" href="carrito.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

<!-- Header con menú -->
<header class="hero">
  <div class="header-content">
    <div class="logo-container">
      <img src="assets/logo1.png" alt="PicaRico Logo" class="logo-img">
      <h1 class="logo-text">PicaRico</h1>
    </div>

    <nav>
      <ul class="nav-links">
        <li><a [routerLink]="['/principal']">Inicio</a></li>
        <li><a [routerLink]="['/productos']">Productos</a></li>
        <li><a [routerLink]="['/promociones']">Promociones</a></li>
        <li><a [routerLink]="['/contacto']">Contacto</a></li>
        <li><a [routerLink]="['/personalizar']">Personalizar</a></li>
      </ul>
    </nav>

    <div class="cart-container">
      <a [routerLink]="['/carrito']" class="cart-link">
        <i class="fa-solid fa-cart-shopping cart-icon"></i>
        <span class="cart-count">{{ cartService.getTotalItems() }}</span>
      </a>
    </div>
  </div>
</header>

<!-- Contenido principal -->
<main class="cart-page">
  <h2>Mi Carrito </h2>

  <div *ngIf="cart.length === 0">
    <p>El carrito está vacío.</p>
  </div>

  <div *ngFor="let product of cart" class="cart-item">
    <img [src]="product.image" alt="{{ product.name }}" class="cart-item-img">
    <div class="cart-item-details">
      <h3>{{ product.name }}</h3>
      <p>{{ product.description }}</p>
      <p>Cantidad: {{ product.quantity }}</p>
      <p>Precio: ${{ product.price * product.quantity | number }}</p>
      <button (click)="remove(product)" class="remove-btn">Eliminar</button>
    </div>
  </div>

  <div *ngIf="cart.length > 0" class="cart-actions">
    <p>Total de productos: {{ cartService.getTotalItems() }}</p>
    <button (click)="clear()" class="clear-btn">Vaciar Carrito</button>
    <button id="buyBtn" class="buy-btn">Comprar</button>
  </div>
</main>

<!-- Formulario emergente -->
<div id="formOverlay" class="form-overlay">
  <div class="purchase-form">
    <h3>Finalizar Compra</h3>
    <form>
      <input type="text" placeholder="Nombre completo" required>
      <input type="email" placeholder="Correo electrónico" required>
      <input type="text" placeholder="Dirección de entrega" required>
      <select required>
        <option value="">Método de pago</option>
        <option value="tarjeta">Tarjeta de crédito</option>
        <option value="efectivo">Efectivo</option>
        <option value="nequi">Nequi</option>
      </select>
      <button type="submit">Confirmar compra</button>
      <button type="button" id="closeForm" class="close-btn">Cancelar</button>
    </form>
  </div>
</div>

<script>
  const buyBtn = document.getElementById('buyBtn');
  const formOverlay = document.getElementById('formOverlay');
  const closeForm = document.getElementById('closeForm');

  buyBtn.addEventListener('click', () => {
    formOverlay.classList.add('active');
  });

  closeForm.addEventListener('click', () => {
    formOverlay.classList.remove('active');
  });

  // Cierra el formulario si se hace clic fuera del cuadro
  window.addEventListener('click', (e) => {
    if (e.target === formOverlay) {
      formOverlay.classList.remove('active');
    }
  });
</script>

</body>
</html>
