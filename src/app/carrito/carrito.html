<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Carrito - PicaRico</title>
  <link rel="stylesheet" href="carrito.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Poppins:wght@400;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

  <!-- Header con menú -->
  <header class="hero">
    <div class="header-content">
      <div class="logo-container">
        <img src="assets/logo1.png" alt="PicaRico Logo" class="logo-img">
        <h1 class="logo-text">PicaRico</h1>
      </div>

      <nav>
        <ul class="nav-links">
          <li><a [routerLink]="['/principal']">Inicio</a></li>
          <li><a [routerLink]="['/productos']">Productos</a></li>
          <li><a [routerLink]="['/promociones']">Promociones</a></li>
          <li><a [routerLink]="['/contacto']">Contacto</a></li>
          <li><a [routerLink]="['/personalizar']">Personalizar</a></li>
        </ul>
      </nav>

      <div class="cart-container">
        <app-profile-icon></app-profile-icon>
        <a [routerLink]="['/carrito']" class="cart-link">
          <i class="fa-solid fa-cart-shopping cart-icon"></i>
          <span class="cart-count">{{ cartService.getTotalItems() }}</span>
        </a>
      </div>
    </div>
  </header>

  <!-- Contenido principal -->
  <main class="cart-page">
    <h2>Mi Carrito</h2>

    <div *ngIf="cart.length === 0">
      <p>El carrito está vacío.</p>
    </div>

    <div *ngFor="let product of cart" class="cart-item">
      <img [src]="product.image" alt="{{ product.name }}" class="cart-item-img">
      <div class="cart-item-details">
        <h3>{{ product.name }}</h3>
        <p>{{ product.description }}</p>
        <p>Cantidad: {{ product.quantity }}</p>
        <p>Precio: ${{ product.price * product.quantity | number }}</p>
        <button (click)="remove(product)" class="remove-btn">Eliminar</button>
      </div>
    </div>

    <div *ngIf="cart.length > 0" class="cart-actions">
      <p>Total de productos: {{ cartService.getTotalItems() }}</p>
      <button (click)="clear()" class="clear-btn">Vaciar Carrito</button>
      <button class="buy-btn" (click)="openSummary()">Comprar</button>
    </div>
  </main>

  <!-- Modal con resumen de compra -->
  <div class="form-overlay" [class.active]="showSummary">
    <div class="purchase-form">
      <h3>Resumen de tu compra</h3>

      <div *ngFor="let product of cart" style="margin-bottom: 10px;">
        <p><strong>{{ product.name }}</strong> (x{{ product.quantity }})</p>
        <p>Subtotal: ${{ product.price * product.quantity | number }}</p>
      </div>

      <hr style="margin: 12px 0; border-color: rgba(255,159,28,0.2);" />
      <p><strong>Total:</strong> ${{ totalCompra | number }}</p>

      <form (submit)="confirmPurchase()">

        <input type="text" placeholder="Dirección de entrega" required>
        <select [(ngModel)]="paymentMethod" name="paymentMethod" required>
          <option value="">Método de pago</option>
          <option value="tarjeta">Tarjeta de crédito</option>
          <option value="efectivo">Efectivo</option>
          <option value="nequi">Nequi</option>
        </select>
        <button type="submit">Confirmar compra</button>
        <button type="button" class="close-btn" (click)="closeSummary()">Cancelar</button>
      </form>
    </div>
  </div>


  <footer class="main-footer">
    <p>© 2025 PicaRico. Todos los derechos reservados.</p>
    <div class="side-social-icons">
      <a href="https://www.instagram.com/picariconeiva?igsh=cWpsM3dxZHlsaW5l" class="social-icon" target="_blank">
        <i class="fab fa-instagram"></i>
      </a>
      <a href="https://www.tiktok.com/@picariconeiva?_t=ZS-8wzgNkc97vF&_r=1" class="social-icon" target="_blank">
        <i class="fab fa-tiktok"></i>
      </a>
      <a href="https://wa.link/4wugcu" class="social-icon" target="_blank">
        <i class="fab fa-whatsapp"></i>
      </a>
    </div>
  </footer>


</body>

</html>